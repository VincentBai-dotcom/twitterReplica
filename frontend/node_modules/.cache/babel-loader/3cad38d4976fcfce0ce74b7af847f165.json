{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\butch\\\\Documents\\\\musegeeks\\\\frontend\\\\src\\\\components\\\\Post.js\",\n    _s = $RefreshSig$();\n\nimport { Grid } from \"@material-ui/core\";\nimport { React, useContext, useEffect, useRef, useState } from \"react\";\nimport AxiosInstance from \"../Axios\";\nimport { UserContext } from \"../App\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Post(props) {\n  _s();\n\n  const post = props.post;\n  const [voteCount, setVoteCount] = useState(0);\n  const [isLoading, setIsLoading] = useState({\n    fetchVoteCount: true,\n    fetchVote: true\n  });\n  const [voteId, setVoteId] = useState(0);\n  const user = useContext(UserContext);\n  useEffect(() => {\n    AxiosInstance.get(\"/api/vote/?post=\" + post.id).then(res => {\n      console.log(res);\n      setVoteCount(res[\"data\"][\"count\"]);\n      setIsLoading(prevState => ({ ...prevState,\n        fetchVoteCount: false\n      }));\n    }).catch(error => {\n      console.log(error);\n    });\n    AxiosInstance.get(\"/api/vote/?post=\" + post.id + \"&user=\" + user.id).then(res => {\n      if (res[\"data\"][\"count\"] !== 0) setVoteId(res[\"data\"][\"results\"][0][\"id\"]);\n      setIsLoading(prevState => ({ ...prevState,\n        fetchVote: false\n      }));\n      console.log(res);\n    }).catch(error => {\n      console.log(error);\n    });\n  }, [voteCount, voteId, post.id, user.id]);\n\n  function upVote() {\n    AxiosInstance.post(\"/api/vote/\", {\n      post: post.id,\n      user: user.id,\n      comment: null\n    }).then(res => {\n      setVoteCount(voteCount + 1);\n      console.log(res);\n    }).catch(error => {\n      console.log({\n        post: post.id,\n        user: user.id\n      });\n      console.log(error);\n    });\n  }\n\n  function downVote() {\n    AxiosInstance.delete(\"/api/vote/\" + voteId + \"/\").then(res => {\n      setVoteCount(voteCount - 1);\n      setVoteId(0);\n      console.log(res);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  function renderVote() {\n    if (voteId !== 0) return /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: downVote,\n      children: \"downVote\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 20\n    }, this);else return /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: upVote,\n      children: \"Upvote\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 20\n    }, this);\n  }\n\n  if (isLoading[\"fetchVoteCount\"] || isLoading[\"fetchVote\"]) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"a\", {\n      style: {\n        fontSize: \"40px\",\n        fontWeight: \"bold\"\n      },\n      children: post.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        fontSize: \"20px\"\n      },\n      children: post.description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        fontSize: \"20px\"\n      },\n      children: [\"Vote: \", voteCount]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), renderVote(), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Post, \"gflCILH6MVhyzhwvIpjkW9gVLCE=\");\n\n_c = Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"sources":["C:/Users/butch/Documents/musegeeks/frontend/src/components/Post.js"],"names":["Grid","React","useContext","useEffect","useRef","useState","AxiosInstance","UserContext","Post","props","post","voteCount","setVoteCount","isLoading","setIsLoading","fetchVoteCount","fetchVote","voteId","setVoteId","user","get","id","then","res","console","log","prevState","catch","error","upVote","comment","downVote","delete","renderVote","fontSize","fontWeight","title","description"],"mappings":"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","sourcesContent":["import { Grid } from \"@material-ui/core\";\r\nimport { React, useContext, useEffect, useRef, useState, } from \"react\";\r\nimport AxiosInstance from \"../Axios\";\r\nimport { UserContext } from \"../App\";\r\n\r\nexport default function Post(props){\r\n    const post = props.post;\r\n    const [voteCount,setVoteCount] = useState(0);\r\n    const [isLoading, setIsLoading] = useState({fetchVoteCount:true, fetchVote:true});\r\n    const [voteId, setVoteId] = useState(0);\r\n    const user = useContext(UserContext);\r\n    useEffect(()=>{\r\n        AxiosInstance\r\n            .get(\"/api/vote/?post=\"+post.id)\r\n            .then((res)=>{\r\n                console.log(res);\r\n                setVoteCount(res[\"data\"][\"count\"]);\r\n                setIsLoading(prevState=>({\r\n                    ...prevState,\r\n                    fetchVoteCount: false,\r\n                }));\r\n            })\r\n            .catch((error)=>{\r\n                console.log(error);\r\n            })\r\n        \r\n        AxiosInstance\r\n            .get(\"/api/vote/?post=\"+post.id+\"&user=\"+user.id)\r\n            .then((res)=>{\r\n                if(res[\"data\"][\"count\"] !== 0)\r\n                    setVoteId(res[\"data\"][\"results\"][0][\"id\"]);\r\n                    setIsLoading(prevState=>({\r\n                        ...prevState,\r\n                        fetchVote: false,\r\n                    }));\r\n                console.log(res);\r\n            })\r\n            .catch((error)=>{\r\n                console.log(error);\r\n            })   \r\n    },[voteCount,voteId,post.id,user.id]);\r\n\r\n    function upVote(){\r\n        AxiosInstance\r\n            .post(\"/api/vote/\", {post:post.id, user: user.id, comment: null})\r\n            .then((res)=>{\r\n                setVoteCount(voteCount+1);\r\n                console.log(res);\r\n            })\r\n            .catch((error)=>{\r\n                console.log({post:post.id, user: user.id});\r\n                console.log(error);\r\n            })\r\n    }\r\n\r\n    function downVote(){\r\n        AxiosInstance\r\n            .delete(\"/api/vote/\"+voteId+\"/\")\r\n            .then((res)=>{\r\n                setVoteCount(voteCount-1);\r\n                setVoteId(0);\r\n                console.log(res);\r\n            })\r\n            .catch((error)=>{\r\n                console.log(error);\r\n            })\r\n    }\r\n\r\n    function renderVote(){\r\n        if(voteId !== 0)\r\n            return <button onClick = {downVote}>downVote</button>;\r\n        else \r\n            return <button onClick = {upVote}>Upvote</button>;\r\n    }\r\n\r\n    if(isLoading[\"fetchVoteCount\"] || isLoading[\"fetchVote\"])\r\n        return null;\r\n\r\n    return(\r\n        <div>\r\n            <a style = {{fontSize:\"40px\", fontWeight:\"bold\", }}>{post.title}</a>\r\n            <p style = {{fontSize: \"20px\", }}>{post.description}</p>\r\n            <p style = {{fontSize: \"20px\"}}>Vote: {voteCount}</p>\r\n            {renderVote()}\r\n            <br/>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}